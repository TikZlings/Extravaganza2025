% !TeX TS-program = lualatex -interaction=nonstopmode % | txs:///view-pdf | txs:///view-log

% !Mode:: "TeX:UTF-8:Main"
%music https://youtu.be/JOGC3sNJJxs 1:17 ...
\RequirePackage{pdfmanagement}
\documentclass[aspectratio=169]{beamer}
\usepackage[svgnames]{xcolor}
\usepackage{tikzlings}
\usepackage{tikzducks}
\usetikzlibrary{tikzlings,ducks}

\usepackage{tikzpingus}
\usepackage{ducksay}
\usepackage{bearwear}
\setbeamertemplate{navigation symbols}{}
\graphicspath{{include/}}
\usepackage{fontspec}
\setmonofont{Fira Mono}
%\setmonofont{

\usepackage{pst-fun}

\begin{document}


\newcommand\birdsbackground{\setbeamertemplate{background canvas}{\includegraphics[width=\paperwidth]{frame}}}

\newcommand\housebackground{\setbeamertemplate{background canvas}{\includegraphics[width=\paperwidth,height=\paperheight,trim=0cm 1cm 0cm 8cm]{house}}}

\ExplSyntaxOn
\newcommand\inscene[3]{%
 \int_compare:nNnT{\birdscene}>{0}{#1}
 \int_compare:nNnT{\birdscene}>{1}{#2}
 \int_compare:nNnT{\birdscene}>{2}{#3}}
\ExplSyntaxOff 

\newcommand\showbirds[1]{\def\birdscene{0#1}
\begin{frame}
\begin{tikzpicture}
\path[use as bounding box](0,0) rectangle (\textwidth,\textheight-1pt);
%\draw[help lines,step=1cm,red] (0,0) grid (\textwidth,\textheight);

\ifnum \birdscene=1 
\path (7.5,12)--(6.5,5.5)node[pos=\fpeval{\the\value{page}/146},xscale=-1]{\includegraphics[width=1.5cm]{hummingbird}};
\fi

\inscene
{\path (0.02,4.2)node{\includegraphics[width=1.5cm]{hummingbird}};}
{\path (6.5,5.5)node[xscale=-1]{\includegraphics[width=1.5cm]{hummingbird}};}
{\path (3,2)node[rotate=-30]{\includegraphics[width=1.55cm]{hummingbird}};}

\ifnum \birdscene=0 
\path (-2+\fpeval{\value{page}/12},0.55\textheight)pic[xscale=-1,scale=0.5,duck/body=black!75!white]{duck};
\fi
\inscene
{\path (2,0.55\textheight)pic[xscale=-1,scale=0.5,duck/body=black!75!white]{duck};}
{\path (8,1.5)pic[scale=0.5,duck/body=teal!75!white]{duck};}
{\path (1,1.1)pic[scale=0.5,xscale=-1]{duck};}

\inscene
{\path (3.5,7)pic[scale=0.5]{owl};}
{\path (2.8,2.8)pic[scale=0.4,owl/eyes=red]{owl};}
{\path (5.5,1.6)pic[scale=0.55,owl/body=gray!50!black]{owl};}

\inscene
{\path (7,1.5)pic[scale=0.5]{chicken};}
{\path (-0.7,1.2)pic[scale=0.6,chicken/body=blue]{chicken};}
{\path (4,3)pic[scale=0.6,chicken/body=green!50!black]{chicken};}

\inscene{}
{\path (1.5,0.3)pic[scale=0.5]{penguin};}
{\path (7.5,0.3)pic[scale=0.6]{penguin};}

\inscene
{
 \begin{scope}[xshift=3.9cm,yshift=5.5cm,scale=0.4]
 \pingu[]
 \end{scope}
}
{
  \begin{scope}[xshift=3.9cm,yshift=5.5cm,scale=0.4]
  \pingu[wings wave]
  \end{scope}
}{} 

\inscene
{\path (5.3,3)pic[scale=0.5]{turkey};}
{\path (1.5,2.8)pic[scale=0.6,turkey/body=gray,turkey/head=red!50!black]{turkey};}
{\path (2.5,0.3)pic[scale=0.55,turkey/body=brown,turkey/head=yellow!50!black]{turkey};}

\inscene
{}
{\path (10,1.3)node[scale=0.6]{\ducksay[duck,no-bubble,no-tail,body=\bfseries\color{white}]{}};}
{
\path (6,0.8)node[xscale=-1,scale=0.6]{\ducksay[small-duck,no-bubble,no-tail,body=\bfseries\color{white}]{}};
}

\inscene
{\node[anchor=south west,scale=0.5] at (7,3.5)
 {\pspicture(0,0)\rput(0,0){\psBird}\endpspicture};}
{\node[anchor=south west,xscale=-1,scale=0.5] at (4,5.5)
 {\pspicture(0,0)\rput{-30}(0,0){\psBird}\endpspicture};}
{\node[anchor=south west,xscale=-1,scale=0.4] at (5,2.5)
 {\pspicture(0,0)\rput{-30}(0,0){\psBird}\endpspicture};}

\end{tikzpicture}
\end{frame}}

\ExplSyntaxOn
\newcommand\bearsinging{%
\mbox{}
\vfill\par
\hfill%
\raisebox{-20pt}[0pt][0pt]{%
 \int_compare:nNnTF {\int_mod:nn{\value{page}}{8}}<{4}
 {
  \tikz{\bear[openmouth]\bearwear[v-neckline,shirt=DarkSeaGreen]}%
  \tikz{\bear[openmouth]\bearwear[v-neckline,shirt=DarkSeaGreen]}%
  \tikz{\bear[openmouth]\bearwear[v-neckline,shirt=DarkSeaGreen]}%
  \tikz{\bear[openmouth]\bearwear[v-neckline,shirt=DarkSeaGreen]}%
 }%
 {
   \tikz{\bear\bearwear[v-neckline,shirt=DarkSeaGreen]}
   \tikz{\bear\bearwear[v-neckline,shirt=DarkSeaGreen]}%
   \tikz{\bear\bearwear[v-neckline,shirt=DarkSeaGreen]}%
   \tikz{\bear\bearwear[v-neckline,shirt=DarkSeaGreen]}%
 }}
\newpage} 

\birdsbackground
\int_step_inline:nn{48}{\showbirds{0}}

\housebackground
\int_step_inline:nn{48}{\bearsinging}

\birdsbackground
\int_step_inline:nn{48}{\showbirds{1}}

\housebackground
\int_step_inline:nn{48}{\bearsinging}

\birdsbackground
\int_step_inline:nn{48}{\showbirds{2}}

\housebackground
\int_step_inline:nn{48}{\bearsinging}

\birdsbackground
\int_step_inline:nn{48}{\showbirds{3}}
\ExplSyntaxOff 

\end{document}
